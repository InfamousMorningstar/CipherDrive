# Environment Configuration Template# ==============================================# Backend Configuration



# Copy this file to .env and modify the values as needed# CipherDrive Configuration FileJWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# DO NOT commit .env file to version control

# ==============================================JWT_REFRESH_SECRET=your-super-secret-refresh-jwt-key-change-this-in-production

# =============================================================================

# DATABASE CONFIGURATION# Copy this file to .env and customize the values for your deploymentJWT_ALGORITHM=HS256

# =============================================================================

POSTGRES_DB=cipherdrive_dbACCESS_TOKEN_EXPIRE_MINUTES=30

POSTGRES_USER=cipherdrive_user

POSTGRES_PASSWORD=your_secure_database_password_here# ==============================================REFRESH_TOKEN_EXPIRE_DAYS=7



# Database URL (constructed from above values)# APPLICATION SETTINGS

DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB}

# ==============================================# SMTP Configuration for email

# =============================================================================

# AUTHENTICATION & SECURITYAPP_NAME=CipherDriveSMTP_HOST=smtp.gmail.com

# =============================================================================

# JWT secret key for token signing (generate a secure random string)APP_VERSION=1.0.0SMTP_PORT=587

JWT_SECRET=your_super_secret_jwt_key_change_in_production

DEBUG=falseSMTP_USER=youremail@example.com

# =============================================================================

# ADMIN CONFIGURATIONENVIRONMENT=productionSMTP_PASS=yourapppassword

# =============================================================================

# Initial admin user credentialsSMTP_TLS=true

ADMIN_EMAIL=admin@cipherdrive.local

ADMIN_PASSWORD=changeme123# ==============================================FROM_EMAIL=youremail@example.com



# =============================================================================# SECURITY SETTINGS

# APPLICATION URLS

# =============================================================================# ==============================================# Database Configuration

# Frontend URL (used for CORS and email links)

FRONTEND_URL=http://localhost:8069# JWT Secret - Generate with: openssl rand -hex 32POSTGRES_USER=dropboxuser



# =============================================================================JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-immediatelyPOSTGRES_PASSWORD=supersecurepassword123

# EMAIL CONFIGURATION (Optional)

# =============================================================================JWT_ALGORITHM=HS256POSTGRES_DB=dropboxlite

# SMTP settings for sending emails

SMTP_HOST=JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30DATABASE_URL=postgresql://dropboxuser:supersecurepassword123@db:5432/dropboxlite

SMTP_PORT=587

SMTP_USER=JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

SMTP_PASS=

SMTP_USE_TLS=true# Admin Configuration

FROM_EMAIL=noreply@cipherdrive.local

FROM_NAME=CipherDrive# Password SecurityADMIN_EMAIL=admin@example.com



# =============================================================================BCRYPT_ROUNDS=12ADMIN_PASSWORD=AdminPassword123!

# STORAGE CONFIGURATION

# =============================================================================DEFAULT_USER_QUOTA_GB=5

# Base directory for file uploads (inside container)

UPLOAD_BASE_DIR=/data/uploads# CSRF Protection



# Maximum file size in bytes (100MB default)CSRF_SECRET_KEY=your-csrf-secret-key-change-this# Storage Configuration

MAX_FILE_SIZE_BYTES=104857600

UPLOAD_PATH=/data

# =============================================================================

# LOGGING & MONITORING# Rate LimitingMAX_FILE_SIZE_MB=100

# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)RATE_LIMIT_ENABLED=true

LOG_LEVEL=INFO

RATE_LIMIT_REQUESTS_PER_MINUTE=60# Security

# Enable audit logging

AUDIT_LOG_ENABLED=trueRATE_LIMIT_BURST_REQUESTS=100ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000



# =============================================================================RATE_LIMIT_REQUESTS=100

# REDIS CONFIGURATION (Optional - for rate limiting)

# =============================================================================# ==============================================RATE_LIMIT_WINDOW_MINUTES=1

REDIS_URL=

# DATABASE SETTINGS

# =============================================================================

# DEVELOPMENT SETTINGS# ==============================================# Optional Features

# =============================================================================

# Set to true for development modeDATABASE_URL=postgresql://cipherdrive_user:secure_password_123@db:5432/cipherdrive_dbENABLE_2FA=true

DEBUG=false

ENABLE_THUMBNAILS=true

# Python unbuffered output

PYTHONUNBUFFERED=1# Individual Database Components (used by docker-compose)THUMBNAIL_SIZES=150,300,600
POSTGRES_DB=cipherdrive_db
POSTGRES_USER=cipherdrive_user
POSTGRES_PASSWORD=secure_password_123
POSTGRES_HOST=db
POSTGRES_PORT=5432

# ==============================================
# REDIS SETTINGS (Optional - for rate limiting)
# ==============================================
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_ENABLED=false

# ==============================================
# FILE STORAGE SETTINGS
# ==============================================
# Base upload directory (will be created if it doesn't exist)
UPLOAD_BASE_DIR=/app/uploads

# TrueNAS SCALE Paths (adjust for your setup)
TRUENAS_MOVIES_PATH=/mnt/Centauri/cipherdrive/movies
TRUENAS_TV_PATH=/mnt/Centauri/cipherdrive/tv
TRUENAS_UPLOADS_PATH=/mnt/app-pool/cipherdrive/uploads

# File Upload Limits
MAX_FILE_SIZE_BYTES=104857600  # 100MB
MAX_FILES_PER_UPLOAD=10
ALLOWED_MIME_TYPES=image/*,video/*,audio/*,text/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.*

# Storage Quotas (in bytes)
DEFAULT_USER_QUOTA=10737418240  # 10GB
DEFAULT_ADMIN_QUOTA=107374182400  # 100GB
CIPHER_USER_QUOTA=0  # Unlimited for cipher user

# ==============================================
# EMAIL SETTINGS (SMTP)
# ==============================================
SMTP_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=noreply@cipherdrive.local
SMTP_FROM_NAME=CipherDrive

# Email Templates
WELCOME_EMAIL_ENABLED=true
PASSWORD_RESET_ENABLED=true
SHARE_NOTIFICATION_ENABLED=true

# ==============================================
# AUDIT LOGGING
# ==============================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=/app/logs/audit.log
AUDIT_LOG_MAX_SIZE_MB=100
AUDIT_LOG_BACKUP_COUNT=5
AUDIT_LOG_LEVEL=INFO

# Database Audit Logging
AUDIT_DB_ENABLED=true
AUDIT_RETENTION_DAYS=90

# ==============================================
# SHARING SETTINGS
# ==============================================
# Default share expiry (in days)
DEFAULT_SHARE_EXPIRY_DAYS=7
MAX_SHARE_EXPIRY_DAYS=30

# Default download limits
DEFAULT_DOWNLOAD_LIMIT=10
MAX_DOWNLOAD_LIMIT=100

# Share URL settings
SHARE_BASE_URL=https://your-domain.com
SHARE_URL_LENGTH=16

# ==============================================
# ADMIN SETTINGS
# ==============================================
# Default admin user (created on first startup)
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@cipherdrive.local
ADMIN_PASSWORD=change_this_admin_password
ADMIN_FULL_NAME=System Administrator

# Cipher user settings (for movies/TV access only)
CIPHER_USERNAME=cipher
CIPHER_EMAIL=cipher@cipherdrive.local
CIPHER_PASSWORD=change_this_cipher_password
CIPHER_FULL_NAME=Cipher User

# ==============================================
# FRONTEND SETTINGS
# ==============================================
VITE_API_BASE_URL=/api
VITE_APP_NAME=CipherDrive
VITE_MAX_FILE_SIZE=104857600
VITE_SUPPORTED_FORMATS=jpg,jpeg,png,gif,bmp,webp,svg,pdf,txt,md,doc,docx,xls,xlsx,ppt,pptx,mp4,avi,mkv,mov,wmv,flv,webm,mp3,wav,flac,aac,ogg
VITE_ENABLE_ANALYTICS=false
VITE_ENABLE_NOTIFICATIONS=true

# ==============================================
# DOCKER & NETWORKING
# ==============================================
# External network name for Cloudflare Tunnel integration
PROXY_NETWORK=proxy-net

# Container ports (internal)
BACKEND_PORT=8000
FRONTEND_PORT=3000
DB_PORT=5432

# Host ports (if not using external proxy)
HOST_BACKEND_PORT=8000
HOST_FRONTEND_PORT=3000

# ==============================================
# CLOUDFLARE TUNNEL SETTINGS
# ==============================================
# These are set in your Cloudflare dashboard, not in this file
# Included for documentation purposes

# CLOUDFLARE_TUNNEL_TOKEN=your-tunnel-token
# CLOUDFLARE_ZONE_ID=your-zone-id
# CLOUDFLARE_ACCOUNT_ID=your-account-id

# Tunnel configuration (set in Cloudflare dashboard):
# - Service: http://cipherdrive-frontend:3000
# - Path: /* (catch all)
# - Additional headers: 
#   - Host: your-domain.com
#   - X-Forwarded-Proto: https

# ==============================================
# LOGGING SETTINGS
# ==============================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=/app/logs/cipherdrive.log
LOG_MAX_SIZE_MB=50
LOG_BACKUP_COUNT=3

# Request logging
ACCESS_LOG_ENABLED=true
ACCESS_LOG_FILE=/app/logs/access.log

# ==============================================
# HEALTH CHECK SETTINGS
# ==============================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_INTERVAL=60

# ==============================================
# DEVELOPMENT SETTINGS
# ==============================================
# Only use in development environment
DEV_CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
DEV_AUTO_RELOAD=false
DEV_DEBUG_SQL=false

# ==============================================
# BACKUP SETTINGS (Optional)
# ==============================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups

# ==============================================
# MONITORING (Optional)
# ==============================================
METRICS_ENABLED=false
METRICS_PORT=9090
PROMETHEUS_ENDPOINT=/metrics

# ==============================================
# MAINTENANCE
# ==============================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="CipherDrive is currently under maintenance. Please check back later."

# ==============================================
# NOTES & EXAMPLES
# ==============================================
# 
# Generate secure secrets:
# - JWT_SECRET_KEY: openssl rand -hex 32
# - CSRF_SECRET_KEY: openssl rand -hex 32
# - POSTGRES_PASSWORD: openssl rand -base64 32
#
# For TrueNAS SCALE deployment:
# 1. Adjust TRUENAS_*_PATH variables to match your dataset paths
# 2. Set up Cloudflare Tunnel with proxy-net external network
# 3. Ensure PostgreSQL data is persisted to TrueNAS storage
# 4. Configure SMTP for user notifications
#
# Security checklist:
# - Change all default passwords
# - Use strong JWT secrets
# - Enable HTTPS in production
# - Configure proper firewall rules
# - Set up regular backups
# - Monitor audit logs
#
# ==============================================